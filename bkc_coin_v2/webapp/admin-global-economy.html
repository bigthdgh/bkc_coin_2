<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - Global Economy</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .card {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            border: 1px solid rgba(255,255,255,0.2);
        }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .stat-card {
            background: rgba(255,255,255,0.05);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
        }
        .stat-number {
            font-size: 32px;
            font-weight: bold;
            color: #f5576c;
            margin: 10px 0;
        }
        .stat-label {
            font-size: 14px;
            color: rgba(255,255,255,0.8);
        }
        .progress-bar {
            width: 100%;
            height: 20px;
            background: rgba(255,255,255,0.2);
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #f093fb 0%, #f5576c 100%);
            transition: width 0.3s;
        }
        .allocation-item {
            background: rgba(255,255,255,0.05);
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
            border-left: 4px solid #f5576c;
        }
        .form-group {
            margin: 15px 0;
        }
        input, select, button {
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            margin: 5px 0;
        }
        button {
            background: linear-gradient(45deg, #f093fb 0%, #f5576c 100%);
            color: white;
            cursor: pointer;
            transition: transform 0.2s;
        }
        button:hover {
            transform: scale(1.05);
        }
        .warning {
            background: rgba(255,0,0,0.1);
            border: 1px solid rgba(255,0,0,0.3);
            border-radius: 10px;
            padding: 15px;
            margin: 20px 0;
        }
        .warning h3 {
            color: #ff6b6b;
            margin: 0 0 10px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ü™ô Global Economy Manager</h1>
        <p>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥–ª–æ–±–∞–ª—å–Ω–æ–π —ç–∫–æ–Ω–æ–º–∏–∫–æ–π BKC Coin (1 –º–∏–ª–ª–∏–∞—Ä–¥ BKC)</p>

        <!-- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –∂–µ—Å—Ç–∫–∏—Ö –ø—Ä–∞–≤–∏–ª–∞—Ö -->
        <div class="warning">
            <h3>‚ö†Ô∏è –ñ–ï–°–¢–ö–ò–ï –ü–†–ê–í–ò–õ–ê</h3>
            <p><strong>–û–±—â–∏–π –æ–±—ä–µ–º:</strong> 1,000,000,000 BKC (–Ω–µ–ª—å–∑—è –∏–∑–º–µ–Ω–∏—Ç—å)</p>
            <p><strong>–ü—É–ª –¥–æ–±—ã—á–∏:</strong> 700,000,000 BKC (70% –¥–ª—è —é–∑–µ—Ä–æ–≤)</p>
            <p><strong>–ê–¥–º–∏–Ω—Å–∫–∏–π —Ñ–æ–Ω–¥:</strong> 300,000,000 BKC (30% –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞)</p>
            <p><strong>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è —ç–º–∏—Å—Å–∏—è:</strong> –ó–ê–ü–†–ï–©–ï–ù–ê</p>
        </div>

        <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
        <div class="card">
            <h2>üìä –ì–ª–æ–±–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" id="total-supply">1.0 –º–ª—Ä–¥</div>
                    <div class="stat-label">–û–±—â–∏–π –æ–±—ä–µ–º</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="mining-pool">700.0 –º–ª–Ω</div>
                    <div class="stat-label">–ü—É–ª –¥–æ–±—ã—á–∏</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="admin-vault">300.0 –º–ª–Ω</div>
                    <div class="stat-label">–ê–¥–º–∏–Ω—Å–∫–∏–π —Ñ–æ–Ω–¥</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="users-circulating">850.0 –º–ª–Ω</div>
                    <div class="stat-label">–ù–∞ —Ä—É–∫–∞—Ö —É —é–∑–µ—Ä–æ–≤</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="total-burned">50.0 –º–ª–Ω</div>
                    <div class="stat-label">–í—Å–µ–≥–æ —Å–æ–∂–∂–µ–Ω–æ</div>
                </div>
            </div>
        </div>

        <!-- –ü—Ä–æ–≥—Ä–µ—Å—Å –ø—É–ª–∞ –¥–æ–±—ã—á–∏ -->
        <div class="card">
            <h2>‚õèÔ∏è –ü—Ä–æ–≥—Ä–µ—Å—Å –ø—É–ª–∞ –¥–æ–±—ã—á–∏</h2>
            <div class="stat-item">
                <span>–î–æ–±—ã—Ç–æ: <strong>150.0 –º–ª–Ω</strong> / 700.0 –º–ª–Ω</span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" style="width: 21.4%;"></div>
            </div>
            <div class="stat-item">
                <span>–û—Å—Ç–∞–ª–æ—Å—å: <strong>550.0 –º–ª–Ω</strong></span>
            </div>
        </div>

        <!-- –ê–¥–º–∏–Ω—Å–∫–∏–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è -->
        <div class="card">
            <h2>üí∞ –ê–¥–º–∏–Ω—Å–∫–∏–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è</h2>
            <div class="stats-grid">
                <div class="allocation-item">
                    <h3>üè¶ –õ–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å (–ª–∏—Å—Ç–∏–Ω–≥)</h3>
                    <div><strong>–í—ã–¥–µ–ª–µ–Ω–æ:</strong> 45.0 –º–ª–Ω BKC</div>
                    <div><strong>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ:</strong> 10.0 –º–ª–Ω BKC</div>
                    <div><strong>–û—Å—Ç–∞–ª–æ—Å—å:</strong> 35.0 –º–ª–Ω BKC</div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 22.2%;"></div>
                    </div>
                </div>
                <div class="allocation-item">
                    <h3>üì¢ –ú–∞—Ä–∫–µ—Ç–∏–Ω–≥</h3>
                    <div><strong>–í—ã–¥–µ–ª–µ–Ω–æ:</strong> 30.0 –º–ª–Ω BKC</div>
                    <div><strong>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ:</strong> 5.0 –º–ª–Ω BKC</div>
                    <div><strong>–û—Å—Ç–∞–ª–æ—Å—å:</strong> 25.0 –º–ª–Ω BKC</div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 16.7%;"></div>
                    </div>
                </div>
                <div class="allocation-item">
                    <h3>üë• –ö–æ–º–∞–Ω–¥–∞</h3>
                    <div><strong>–í—ã–¥–µ–ª–µ–Ω–æ:</strong> 15.0 –º–ª–Ω BKC</div>
                    <div><strong>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ:</strong> 2.0 –º–ª–Ω BKC</div>
                    <div><strong>–û—Å—Ç–∞–ª–æ—Å—å:</strong> 13.0 –º–ª–Ω BKC</div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 13.3%;"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –§–æ—Ä–º–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å—Ä–µ–¥—Å—Ç–≤ -->
        <div class="card">
            <h2>üí∏ –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ä–µ–¥—Å—Ç–≤</h2>
            <form id="allocate-form">
                <div class="form-group">
                    <label>–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:</label>
                    <select id="purpose" required>
                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ</option>
                        <option value="liquidity">üè¶ –õ–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å (–ª–∏—Å—Ç–∏–Ω–≥)</option>
                        <option value="marketing">üì¢ –ú–∞—Ä–∫–µ—Ç–∏–Ω–≥</option>
                        <option value="team">üë• –ö–æ–º–∞–Ω–¥–∞</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>–°—É–º–º–∞ (BKC):</label>
                    <input type="number" id="amount" placeholder="10000000" min="1" required>
                </div>
                <button type="submit">üí∏ –†–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç—å</button>
            </form>
        </div>

        <!-- –î–µ–π—Å—Ç–≤–∏—è -->
        <div class="card">
            <h2>üîß –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</h2>
            <div style="display: flex; gap: 20px;">
                <button onclick="checkMiningCapacity()">‚õèÔ∏è –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—É–ª –¥–æ–±—ã—á–∏</button>
                <button onclick="refreshStats()">üîÑ –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É</button>
                <button onclick="exportReport()">üìä –≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á–µ—Ç–∞</button>
            </div>
        </div>
    </div>

    <script>
        // –ó–∞–≥—Ä—É–∑–∫–∞ –≥–ª–æ–±–∞–ª—å–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        async function loadGlobalStats() {
            try {
                const response = await fetch('/api/v1/global/stats');
                const result = await response.json();

                if (result.success) {
                    updateUI(result.global_economy);
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏:', error);
            }
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        function updateUI(data) {
            // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏
            document.getElementById('total-supply').textContent = formatNumber(data.total_supply);
            document.getElementById('mining-pool').textContent = formatNumber(data.mining_pool.total);
            document.getElementById('admin-vault').textContent = formatNumber(data.admin_vault.total);
            document.getElementById('users-circulating').textContent = formatNumber(data.users_circulating);
            document.getElementById('total-burned').textContent = formatNumber(data.total_burned);

            // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å –ø—É–ª–∞
            const miningProgress = (data.mining_pool.mined / data.mining_pool.total) * 100;
            const progressFill = document.querySelector('.progress-fill');
            if (progressFill) {
                progressFill.style.width = miningProgress + '%';
            }
        }

        // –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ä–µ–¥—Å—Ç–≤
        document.getElementById('allocate-form').addEventListener('submit', async function(e) {
            e.preventDefault();

            const purpose = document.getElementById('purpose').value;
            const amount = parseInt(document.getElementById('amount').value);

            if (!purpose || !amount) {
                alert('‚ö†Ô∏è –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è');
                return;
            }

            try {
                const response = await fetch('/api/v1/admin/allocate', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ purpose, amount })
                });

                const result = await response.json();

                if (result.success) {
                    alert(`‚úÖ ${result.message}`);
                    document.getElementById('allocate-form').reset();
                    loadGlobalStats(); // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
                } else {
                    alert(`‚ùå –û—à–∏–±–∫–∞: ${result.message || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞'}`);
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è:', error);
                alert('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–∏ —Å—Ä–µ–¥—Å—Ç–≤');
            }
        });

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—É–ª–∞ –¥–æ–±—ã—á–∏
        async function checkMiningCapacity() {
            const amount = prompt('–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ (BKC):', '1000000');
            if (!amount) return;

            try {
                const response = await fetch(`/api/v1/global/check-mining?amount=${amount}`);
                const result = await response.json();

                if (result.success) {
                    alert(`‚úÖ ${result.message}`);
                } else {
                    alert(`‚ùå ${result.message}`);
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏:', error);
                alert('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –ø—É–ª–∞');
            }
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        function refreshStats() {
            loadGlobalStats();
            alert('üîÑ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∞');
        }

        // –≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á–µ—Ç–∞
        function exportReport() {
            const data = {
                timestamp: new Date().toISOString(),
                total_supply: 1000000000,
                mining_pool: {
                    total: 700000000,
                    mined: 150000000,
                    remaining: 550000000
                },
                admin_vault: {
                    total: 300000000,
                    allocations: {
                        liquidity: { allocated: 45000000, used: 10000000, remaining: 35000000 },
                        marketing: { allocated: 30000000, used: 5000000, remaining: 25000000 },
                        team: { allocated: 15000000, used: 2000000, remaining: 13000000 }
                    }
                }
            };

            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `bkc-global-economy-${new Date().toISOString().split('T')[0]}.json`;
            a.click();
        }

        // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∏—Å–µ–ª
        function formatNumber(num) {
            if (num >= 1000000000) {
                return (num / 1000000000).toFixed(1) + ' –º–ª—Ä–¥';
            } else if (num >= 1000000) {
                return (num / 1000000).toFixed(1) + ' –º–ª–Ω';
            } else if (num >= 1000) {
                return (num / 1000).toFixed(1) + ' —Ç—ã—Å';
            }
            return num.toString();
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.onload = function() {
            loadGlobalStats();
        };
    </script>
</body>
</html>
